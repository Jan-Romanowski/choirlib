{% extends 'content/template.html' %}

{% block body %}

<style>
    .colorBox{
        cursor: pointer;
        width: 48px;
        height: 40px;
    }
</style>

<h2 class="text-center m-3">Wydarzenia {{ date|date:"d F Y" }}</h2>

<a href="{% url 'day_events_form' selected_year selected_month selected_day %}" class="btn btn-outline-primary">Dodaj wydarzenie</a>

<div class="container">
    {% for event in events %}

    <div class="card mb-3 mx-1">
        <div class="row g-0 h-100">
              <div class="card-body">
                <h5 class="card-title">{{ event.title }}</h5>
                <p class="card-text text-truncate"> ({{ event.start_time|date:"H:i" }} - {{ event.end_time|date:"H:i" }})</p>

                <input type="hidden" name="event_id" value="{{ event.id }}">
                {% if perms.event.add_event %}
                    <a href="{% url 'day_events_form' selected_year selected_month selected_day %}?event_id={{ event.id }}" class="btn btn-outline-primary">Edycja</a>
                {% endif %}
                <input type="submit" class="btn btn-outline-danger" name="delete_event" value="Usuń">
            </div>
        </div>
    </div>
    
    {% empty %}
    <p class="card-text"><small class="text-body-secondary">Nie ma nic zaplanowanego na ten dzień</small></p>
{% endfor %}
</div>

<script>
    function setColor(element) {
        const formPart = document.getElementById('clr');
        const backgroundColor = window.getComputedStyle(element).backgroundColor;
        console.log("Background color:", backgroundColor);
        formPart.value = rgbToHex(backgroundColor);
    }

    function rgbToHex(rgb) {
        var rgbArray = rgb.match(/\d+/g);
        var r = parseInt(rgbArray[0]).toString(16).padStart(2, '0');
        var g = parseInt(rgbArray[1]).toString(16).padStart(2, '0');
        var b = parseInt(rgbArray[2]).toString(16).padStart(2, '0');
        return `#${r}${g}${b}`;
    }
</script>
{% endblock %}

